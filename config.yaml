# Real Deal - Ontario Cash-Flow Scanner Config

max_price: 550000
province: "ON"

cities:
  tier_1:
    - Windsor
    - Sarnia
    - Chatham-Kent
    - Sudbury
    - North Bay
    - Thunder Bay
    - Timmins
    - Sault Ste. Marie
    - Cornwall
    - Welland
  tier_2:
    - St. Catharines
    - Niagara Falls
    - Brantford
    - Peterborough
    - Belleville
    - Kingston
    - London
    - Oshawa
    - Hamilton
  tier_3:
    - Elliot Lake
    - Kapuskasing
    - Cochrane
    - Pembroke
    - Owen Sound
    - Stratford
    - Leamington
    - Amherstburg
  bruce_county:
    - Kincardine
    - Walkerton
    - Hanover
    - Port Elgin
    - Southampton
    # Bruce County area (listings may use these city names)
    - South Bruce
    - Ripley
    - Tiverton
    - Bruce Peninsula
  alberta:
    - Edmonton
    - Calgary
    - Red Deer
    - Lethbridge
    - Medicine Hat
    - Grande Prairie

# Province mapping per tier (default: value of 'province' above, i.e. ON)
tier_provinces:
  alberta: "AB"

keyword_filters:
  require_include_match: false  # When false, only apply exclude filter (API search returns minimal data)
  include:
    - duplex
    - triplex
    - multi-family
    - multi family
    - legal duplex
    - in-law
    - in law
    - separate entrance
    - basement apartment
    - secondary suite
    - two kitchens
    - 2 kitchens
    - income property
  exclude:
    - land
    - vacant lot
    - parking only
    - lease
    - rental
    - student room

underwriting:
  vacancy_rate: 0.06
  management_rate: 0.08
  maintenance_rate: 0.05
  capex_rate: 0.05
  insurance_monthly: 150
  utilities_monthly: 250
  snow_lawn_monthly: 75
  closing_cost_rate: 0.02
  down_payment_rate: 0.20
  interest_rate: 0.055
  amort_years: 30
  property_tax_rate_annual: 0.011

stress_test:
  rent_haircut: 0.07
  interest_rate_bump: 0.01
  vacancy_bump: 0.02

pass_fail:
  min_cashflow_monthly: 150
  min_dscr: 1.15
  min_cash_on_cash: 0.08
  # Margin of safety score (0-100)
  margin_of_safety_base: 50
  margin_of_safety_stress_positive: 25
  margin_of_safety_stress_threshold: 15
  margin_of_safety_coc: 5
  margin_of_safety_dscr: 5

rent_estimation:
  # Default for cities not in any tier
  default:
    base: 1200
    per_bedroom: 800
  # Tiered formula: rent = base + per_bedroom * bedrooms (by city tier)
  tiers:
    tier_1:
      base: 1400
      per_bedroom: 900
    tier_2:
      base: 1200
      per_bedroom: 800
    tier_3:
      base: 1100
      per_bedroom: 650
    bruce_county:
      base: 1000
      per_bedroom: 500
    alberta:
      base: 1300
      per_bedroom: 800
  # Bounds for parsed rent from description (sanity check)
  min_rent: 500
  max_rent: 15000

data_source:
  # Connector: "realtor", "redfin", or "both" (merge and dedupe)
  connector: "both"
  # RapidAPI Realtor.ca Scraper API (baqo271)
  rapidapi_host: "realtor-ca-scraper-api.p.rapidapi.com"
  rapidapi_key_env: RAPIDAPI_KEY
  delay_seconds: 2.0
  # Filter out "no longer available" listings (Realtor.ca uses $1 as placeholder)
  min_price: 20000
  # PropertyTypeGroupID: 1=Residential, 2=Recreational, 3=Condo, 4=Commercial (Realtor only)
  property_type_group_id: "1"
  # Search area: bounding box delta (degrees, ~111km/degree) and zoom level (Realtor only)
  bounding_box_delta: 0.15
  zoom_level: "10"
  # Redfin Canada API (Apidojo) - used when connector: redfin
  redfin_host: "redfin-canada.p.rapidapi.com"